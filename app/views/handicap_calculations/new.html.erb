<div class="min-h-screen bg-gradient-to-b from-blue-50 to-white py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-4xl mx-auto">
    <!-- Success Message -->
    <div class="text-center mb-8">
      <div class="inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4">
        <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
      </div>
      <h1 class="text-4xl font-extrabold text-gray-900 mb-2">
        Your Handicap is Calculated!
      </h1>
      <p class="text-lg text-gray-600">
        Based on your last 3 rounds
      </p>
    </div>

    <!-- Handicap Result Card -->
    <div class="bg-white rounded-lg shadow-xl p-8 mb-8">
      <div class="text-center mb-6">
        <p class="text-sm uppercase tracking-wide text-gray-600 mb-2">Your Predicted Handicap Index</p>
        <p class="text-6xl font-extrabold text-blue-600"><%= @calculated_handicap %></p>
      </div>

      <!-- AI Context -->
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
        <h3 class="font-semibold text-blue-900 mb-3">What This Means</h3>
        <p class="text-blue-800 whitespace-pre-wrap"><%= @ai_context %></p>
      </div>

      <!-- Rounds Summary -->
      <div class="border-t border-gray-200 pt-6">
        <h3 class="font-semibold text-gray-900 mb-4">Your Rounds</h3>
        <div class="space-y-3">
          <% @golf_rounds.each_with_index do |round, index| %>
            <div class="flex items-center justify-between bg-gray-50 rounded-lg p-4">
              <div class="flex items-center">
                <span class="bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center mr-3 text-sm font-bold">
                  <%= index + 1 %>
                </span>
                <div>
                  <p class="font-medium text-gray-900"><%= round.course_name %></p>
                  <p class="text-sm text-gray-600">
                    Rating: <%= round.course_rating %> / Slope: <%= round.slope_rating %>
                  </p>
                </div>
              </div>
              <div class="text-right">
                <p class="text-2xl font-bold text-gray-900"><%= round.score %></p>
                <p class="text-xs text-gray-500">Differential: <%= round.score_differential.round(1) %></p>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Next Steps -->
    <div class="bg-white rounded-lg shadow-lg p-8">
      <h2 class="text-2xl font-bold text-gray-900 mb-4">Ready to Improve?</h2>
      <p class="text-gray-600 mb-6">
        Now that you know your current handicap, let's create a personalized training plan to help you reach your goals.
      </p>

      <%= form_with url: training_plans_path, method: :post, class: "space-y-4" do |f| %>
        <!-- Hidden field for current handicap -->
        <%= hidden_field_tag "training_plan[current_handicap]", @calculated_handicap %>

        <div>
          <%= label_tag "training_plan[target_handicap]", "What's your target handicap?", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= number_field_tag "training_plan[target_handicap]", nil,
                               step: 0.1, min: 0, max: @calculated_handicap - 0.1,
                               class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",
                               placeholder: "e.g., #{[@calculated_handicap - 5, 0].max.round(1)}",
                               required: true %>
          <p class="mt-1 text-sm text-gray-500">Must be lower than your current handicap of <%= @calculated_handicap %></p>
        </div>

        <div>
          <%= label_tag "training_plan[timeline_months]", "Timeline (Months)", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= number_field_tag "training_plan[timeline_months]", nil,
                               min: 1, max: 36,
                               class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500",
                               placeholder: "e.g., 6",
                               required: true %>
          <p class="mt-1 text-sm text-gray-500">How many months do you have to reach your goal?</p>
        </div>

        <div class="flex gap-4 pt-4">
          <%= link_to "Go Back", root_path, class: "flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium text-center" %>
          <%= submit_tag "Generate Training Plan", class: "flex-1 bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 font-semibold cursor-pointer" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
