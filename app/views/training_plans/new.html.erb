<div class="min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-3xl mx-auto">
    <div class="text-center mb-8">
      <h1 class="text-4xl font-extrabold text-gray-900 mb-2">
        Create Your Training Plan
      </h1>
      <p class="text-lg text-gray-600">
        Tell us about your current handicap and goals
      </p>
    </div>

    <div class="bg-white rounded-lg shadow-lg p-8">
      <%= form_with model: @training_plan, url: training_plans_path, class: "space-y-6" do |f| %>

        <% if @training_plan.errors.any? %>
          <div class="bg-red-50 border border-red-400 text-red-800 px-4 py-3 rounded">
            <ul class="list-disc list-inside">
              <% @training_plan.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <div>
          <%= f.label :current_handicap, "Current Handicap", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= f.number_field :current_handicap,
                             step: 0.1,
                             min: 0,
                             max: 54,
                             class: "mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm",
                             placeholder: "e.g., 18.5",
                             required: true %>
          <p class="mt-1 text-sm text-gray-500">Enter your current golf handicap index (0-54)</p>
        </div>

        <div>
          <%= f.label :target_handicap, "Target Handicap", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= f.number_field :target_handicap,
                             step: 0.1,
                             min: 0,
                             max: 54,
                             class: "mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm",
                             placeholder: "e.g., 12.0",
                             required: true %>
          <p class="mt-1 text-sm text-gray-500">What handicap are you aiming for? (must be lower than current)</p>
        </div>

        <div>
          <%= f.label :timeline_months, "Timeline (Months)", class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= f.number_field :timeline_months,
                             min: 1,
                             max: 36,
                             class: "mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 sm:text-sm",
                             placeholder: "e.g., 6",
                             required: true %>
          <p class="mt-1 text-sm text-gray-500">How many months do you have to reach your goal? (1-36 months)</p>
        </div>

        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
          <h3 class="font-semibold text-blue-900 mb-2">What happens next?</h3>
          <p class="text-sm text-blue-800">
            We'll use AI to generate three personalized training guides (simple, medium, and complex) based on your
            current handicap, target goal, and timeline. Each guide will include specific drills, practice schedules,
            and realistic expectations based on professional golf research.
          </p>
        </div>

        <div class="flex gap-4">
          <%= link_to "Back", root_path, class: "flex-1 py-3 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium text-center" %>
          <%= f.submit "Generate Training Plan",
              data: { turbo_submits_with: "Generating your plan..." },
              class: "flex-1 bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 font-semibold cursor-pointer" %>
        </div>
      <% end %>

      <div id="loading-message" class="hidden mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4">
        <div class="flex items-center">
          <svg class="animate-spin h-5 w-5 text-blue-600 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          <div>
            <p class="font-semibold text-blue-900">Generating your personalized training plan...</p>
            <p class="text-sm text-blue-700">This typically takes 10-20 seconds. Please don't refresh the page.</p>
          </div>
        </div>
      </div>

      <script>
        document.addEventListener('turbo:submit-start', function() {
          document.getElementById('loading-message').classList.remove('hidden');
        });
      </script>
    </div>

    <div class="mt-8 bg-white rounded-lg shadow p-6">
      <h3 class="font-semibold text-gray-900 mb-3">Typical Improvement Rates</h3>
      <ul class="space-y-2 text-sm text-gray-600">
        <li class="flex items-start">
          <svg class="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
          </svg>
          <span>Beginners (25+ handicap): Can typically improve 5-8 strokes in 6-12 months with consistent practice</span>
        </li>
        <li class="flex items-start">
          <svg class="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
          </svg>
          <span>Intermediate (15-25 handicap): Can typically improve 3-5 strokes in 6-12 months</span>
        </li>
        <li class="flex items-start">
          <svg class="w-5 h-5 text-green-500 mr-2 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
          </svg>
          <span>Advanced (under 15 handicap): Improvement is gradual, 2-3 strokes per year is realistic</span>
        </li>
      </ul>
    </div>
  </div>
</div>
